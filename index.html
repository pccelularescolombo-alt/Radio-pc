<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Rádio Online</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;}
body{
    margin:0;
    background:#111;
    color:white;
    font-family:Arial,Helvetica,sans-serif;
    display:flex;
    flex-direction:column;
    height:100vh;
}

/* BARRAS */
.bar{
    height:60px;
    background:linear-gradient(90deg,#007bff,#ff7a00);
    display:flex;
    align-items:center;
    padding:0 15px;
}
.top-bar{justify-content:space-between;}
.bottom-bar{justify-content:space-between;}

/* LOGO */
.logo{height:40px;}

/* CENTRO */
.center{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
}

/* CONTROLES */
.controls{
    display:flex;
    align-items:center;
    gap:10px;
}
.controls img{
    width:40px;
    height:40px;
    cursor:pointer;
    opacity:0.6;
    transition:.2s;
}
.controls img.active{
    opacity:1;
    filter:drop-shadow(0 0 6px #00c3ff);
}

/* BARRA MÚSICA */
.track-bar{
    flex:1;
    margin-left:10px;
    background:#222;
    padding:8px 12px;
    border-radius:20px;
    overflow:hidden;
    white-space:nowrap;
}
.track-text{
    display:inline-block;
    animation:scroll 12s linear infinite;
}
@keyframes scroll{
    from{transform:translateX(100%);}
    to{transform:translateX(-100%);}
}

/* LOGIN */
#loginBox{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#222;
    padding:20px;
    border-radius:10px;
    display:none;
    flex-direction:column;
    gap:10px;
}
#loginBox input{
    padding:8px;
    border:none;
    border-radius:5px;
}
#loginBox button{
    padding:8px;
    background:#ff7a00;
    border:none;
    color:white;
    cursor:pointer;
}

.track-info{
    display:flex;
    justify-content:space-between;
    font-size:14px;
    margin-bottom:6px;
}

.progress-container{
    position:relative;
    height:6px;
    background:#444;
    border-radius:5px;
    overflow:hidden;
    cursor:pointer;
}

.progress{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#00c3ff,#ff7a00);
}

.dot{
    position:absolute;
    top:50%;
    left:0%;
    width:14px;
    height:14px;
    background:white;
    border-radius:50%;
    transform:translate(-50%,-50%);
}

.dual-bars{
    display:flex;
    gap:15px;
}

.bar-block{
    flex:1;
    display:flex;
    flex-direction:column;
}

/* Barra da categoria */
.cat-progress{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#ff0066,#ffaa00);
}

.cat-dot{
    position:absolute;
    top:50%;
    left:0%;
    width:14px;
    height:14px;
    background:#ffcc00;
    border-radius:50%;
    transform:translate(-50%,-50%);
}

</style>
</head>

<body>

<!-- BARRA SUPERIOR -->
<div class="bar top-bar">
    <img src="logo/logo.png" class="logo">
    <img id="loginBtn" src="icon/login.png" class="logo" style="cursor:pointer;">
</div>

<!-- CENTRO -->
<div class="center">
    <h1>Rádio Online</h1>
    <p>Pinheirinho Celulares</p>
</div>

<!-- BARRA INFERIOR -->
<div class="bar bottom-bar">

    <div class="controls">
        <img id="playBtn" src="icon/play.png" onclick="togglePlay()">
        <img id="prevBtn" src="icon/back_musica.png" onclick="prevMusic()" style="display:none;">
        <img id="nextBtn" src="icon/next_musica.png" onclick="nextMusic()" style="display:none;">
        <img id="muteBtn" src="icon/volume_mute.png" onclick="muteMusic()">
        <img src="icon/volume_menos.png" onclick="volumeDown()">
        <img src="icon/volume_mais.png" onclick="volumeUp()">
        <img id="catBtn" src="icon/categoria.png" onclick="changeCategory()" style="display:none;">
    </div>

<div class="track-bar dual-bars">

    <!-- BARRA DA MÚSICA -->
    <div class="bar-block">
        <div class="track-info">
            <span id="trackName">Nenhuma música tocando</span>
            <span id="trackTime">00:00 / 00:00</span>
        </div>
        <div class="progress-container">
            <div class="progress"></div>
            <div class="dot"></div>
        </div>
    </div>

    <!-- BARRA DA CATEGORIA -->
    <div class="bar-block">
        <div class="track-info">
            <span>Categoria: <b id="catName">Eletrônica</b></span>
            <span id="categoryTimeText">00:00 / 60:00</span>
        </div>
        <div class="progress-container">
            <div class="cat-progress"></div>
            <div class="cat-dot"></div>
        </div>
    </div>

</div>

<!-- LOGIN -->
<div id="loginBox">
    <input id="user" placeholder="Login">
    <input id="pass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
</div>

<audio id="player"></audio>

<script>
let userType="padrao";
let musicCounter=0;
let currentCategory="eletronica";

let isMuted=false;
let hasStarted=false;

const loginBtn = document.getElementById("loginBtn");
const catBtn   = document.getElementById("catBtn");
const prevBtn  = document.getElementById("prevBtn");
const nextBtn  = document.getElementById("nextBtn");
const loginBox = document.getElementById("loginBox");
const user     = document.getElementById("user");
const pass     = document.getElementById("pass");
const player   = document.getElementById("player");
const trackName= document.getElementById("trackName");
const trackTime= document.getElementById("trackTime");

/* ELETRÔNICA */
const musicas = {
    eletronica: [
        "Amine_Edge_DANCE_Lost.mp3",
        "Artemas_I_like_the_way_you_kiss_me.mp3",
        "Azari_III_Hungry_for_the_power.mp3",
        "Calvin_Harris_Thinking_About_You_ft_Ayah_Marar.mp3",
        "Calvin_Harris_Sam_Smith_Promises.mp3",
        "Duke_Dumont_Ocean_Drive.mp3",
        "Ed_Sheeran_Bad_Habits.mp3",
        "Empire_of_the_Sun_We_Are_The_People.mp3",
        "Gorgon_City_Imagination_ft_Katy_Menditta.mp3",
        "I_Follow_Rivers_Lykke_Li.mp3",
        "James_Hype_7_Seconds_ft_Shamira_Battles.mp3",
        "James_Hype_Drums_ft_Kim_Petras.mp3",
        "James_Hype_Miggy_Dela_Rosa_Ferrari.mp3",
        "John_Newman_Love_Me_Again.mp3",
        "Kendrick_Lamar_SZA_All_The_Stars.mp3",
        "MEDUZA_Tell_It_To_My_Heart_ft_Hozier.mp3",
        "MEDUZA_Becky_Hill_Goodboys_Lose_Control.mp3",
        "Mr_Probz_Waves.mp3",
        "Purple_Disco_Machine_Kungs_Substitution_ft_Julian_Perretta.mp3",
        "Sam_Smith_Unholy_ft_Kim_Petras.mp3",
        "Slow_Down_ft_Jorja_Smith.mp3",
        "Tame_Impala_The_Less_I_Know_The_Better.mp3",
        "The_Black_Eyed_Peas_Meet_Me_Halfway.mp3",
        "Tiesto_The_Business.mp3",
        "Zerb_The_Chainsmokers_Addicted_ft_Ink.mp3"
    ],
    
       /* ===== POP ===== */
    pop: [
        // COLOQUE AQUI OS MP3 DA PASTA /musicas/pop
        // "nome_da_musica.mp3",
        // "outro_arquivo.mp3"
    ],

    /* ===== SERTANEJO ===== */
    sertanejo: [
        // COLOQUE AQUI OS MP3 DA PASTA /musicas/sertanejo
    ],

    /* ===== ANOS 80 ===== */
    anos_80: [
        // COLOQUE AQUI OS MP3 DA PASTA /musicas/anos_80
    ],

    /* ===== 2000 ===== */
    anos_2000: [
        // COLOQUE AQUI OS MP3 DA PASTA /musicas/2000
    ],

    /* ===== DIVULGAÇÃO ===== */
    divulgacao: [
        "promo1.mp3",
        "promo2.mp3"
    ]
};

document.getElementById("loginBtn").onclick=function(){
    if(userType==="padrao") loginBox.style.display="flex";
    else logout();
}

function login(){
    if(user.value==="admin" && pass.value==="1234"){
        userType="admin";
        loginBtn.src="icon/sair.png";
        catBtn.style.display="block";
        prevBtn.style.display="block";
        nextBtn.style.display="block";
        loginBox.style.display="none";
    }
}

function logout(){
    userType="padrao";
    loginBtn.src="icon/login.png";
    catBtn.style.display="none";
    prevBtn.style.display="none";
    nextBtn.style.display="none";
}

/* === PLAY / PAUSE INTELIGENTE === */
function togglePlay(){

    if(!hasStarted){
        startNewSong();
        hasStarted=true;
        return;
    }

    if(player.paused){
        player.play();
        playBtn.src="icon/pausa.png";
        playBtn.classList.add("active");
    }else{
        player.pause();
        playBtn.src="icon/play.png";
        playBtn.classList.remove("active");
    }
}

function startNewSong(){
    let folder=currentCategory;
    let list=musicas[folder];

    if(musicCounter===5){
        folder="divulgacao";
        list=musicas.divulgacao;
        musicCounter=0;
    }else{
        musicCounter++;
    }

    const song=list[Math.floor(Math.random()*list.length)];
    player.src=`musicas/${folder}/${song}`;
    trackName.innerText=song.replaceAll("_"," ");
    player.play();

    playBtn.src="icon/pausa.png";
    playBtn.classList.add("active");
}

/* Quando termina, toca a próxima */
player.onended=()=>{
    hasStarted=false;
    togglePlay();
}

/* MUTE */
function muteMusic(){
    player.muted=!player.muted;
    isMuted=player.muted;
    muteBtn.classList.toggle("active",isMuted);
}

/* VOLUME */
function volumeUp(){player.volume=Math.min(1,player.volume+0.1);}
function volumeDown(){player.volume=Math.max(0,player.volume-0.1);}

function changeCategory(){
    alert("Eletrônica é a categoria ativa (modo teste)");
}

/* PROGRESSO */
player.addEventListener("timeupdate", ()=>{

   /* BARRA DA MÚSICA */
   const musicPercent = (player.currentTime / player.duration) * 100 || 0;
   document.querySelector(".progress").style.width = musicPercent + "%";
   document.querySelector(".dot").style.left = musicPercent + "%";

   /* BARRA DA CATEGORIA */
   const catPercent = (categoryTime[currentCategory] / categoryLimit[currentCategory]) * 100 || 0;
   document.querySelector(".cat-progress").style.width = Math.min(catPercent,100) + "%";
   document.querySelector(".cat-dot").style.left = Math.min(catPercent,100) + "%";

   trackTime.innerText =
     formatTime(player.currentTime)+" / "+formatTime(player.duration);

   categoryTimeText.innerText =
     formatTime(categoryTime[currentCategory])+" / "+formatTime(categoryLimit[currentCategory]);
});

function formatTime(sec){
    if(!sec) return "00:00";
    const m = Math.floor(sec/60);
    const s = Math.floor(sec%60);
    return m.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0");
}

function seek(e){
    const rect = e.currentTarget.getBoundingClientRect();
    const percent = (e.clientX - rect.left) / rect.width;
    player.currentTime = percent * player.duration;
}

function nextMusic(){
    hasStarted=false;
    togglePlay();
}

function prevMusic(){
    hasStarted=false;
    togglePlay();
}

let categoryTime = {
  eletronica: 0,
  pop: 0,
  sertanejo: 0,
  anos_80: 0,
  anos_2000: 0,
  divulgacao: 0
};

let categoryLimit = {
  eletronica: 3600,
  pop: 1800,
  sertanejo: 2400,
  anos_80: 1800,
  anos_2000: 1800,
  divulgacao: 600
};

setInterval(()=>{
   if(!player.paused){
      categoryTime[currentCategory]++;
   }
},1000);

</script>
</body>
</html>
