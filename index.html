<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Rádio Online</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;}
body{
    margin:0;
    background:#111;
    color:white;
    font-family:Arial,Helvetica,sans-serif;
    display:flex;
    flex-direction:column;
    height:100vh;
}

/* BARRAS */
.bar{
    height:60px;
    background:linear-gradient(90deg,#007bff,#ff7a00);
    display:flex;
    align-items:center;
    padding:0 15px;
}
.top-bar{justify-content:space-between;}
.bottom-bar{justify-content:space-between;}

/* LOGO */
.logo{height:40px;}

/* CENTRO */
.center{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
}

/* CONTROLES */
.controls{
    display:flex;
    align-items:center;
    gap:10px;
}
.controls img{
    width:40px;
    height:40px;
    cursor:pointer;
    opacity:0.6;
    transition:.2s;
}
.controls img.active{
    opacity:1;
    filter:drop-shadow(0 0 6px #00c3ff);
}

/* BARRA MÚSICA */
.track-bar{
    flex:1;
    margin-left:10px;
    background:#222;
    padding:8px 12px;
    border-radius:20px;
    overflow:hidden;
    white-space:nowrap;
}
.track-text{
    display:inline-block;
    animation:scroll 12s linear infinite;
}
@keyframes scroll{
    from{transform:translateX(100%);}
    to{transform:translateX(-100%);}
}

/* LOGIN */
#loginBox{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#222;
    padding:20px;
    border-radius:10px;
    display:none;
    flex-direction:column;
    gap:10px;
}
#loginBox input{
    padding:8px;
    border:none;
    border-radius:5px;
}
#loginBox button{
    padding:8px;
    background:#ff7a00;
    border:none;
    color:white;
    cursor:pointer;
}

.track-info{
    display:flex;
    justify-content:space-between;
    font-size:14px;
    margin-bottom:6px;
}

.progress-container{
    position:relative;
    height:6px;
    background:#444;
    border-radius:5px;
    overflow:hidden;
    cursor:pointer;
}

.progress{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#00c3ff,#ff7a00);
}

.dot{
    position:absolute;
    top:50%;
    left:0%;
    width:14px;
    height:14px;
    background:white;
    border-radius:50%;
    transform:translate(-50%,-50%);
}

.dual-bars{
    display:flex;
    gap:15px;
}

.bar-block{
    flex:1;
    display:flex;
    flex-direction:column;
}

/* Barra da categoria */
.cat-progress{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#ff0066,#ffaa00);
}

.cat-dot{
    position:absolute;
    top:50%;
    left:0%;
    width:14px;
    height:14px;
    background:#ffcc00;
    border-radius:50%;
    transform:translate(-50%,-50%);
}

.controls img:hover{
    opacity:1;
    filter:drop-shadow(0 0 6px #00c3ff);
    transform:scale(1.08);
}

.controls img:active{
    transform:scale(0.95);
    filter:drop-shadow(0 0 10px #ff7a00);
}

#categoryList,
#musicList{
    display:flex;
    flex-direction:column;
    gap:10px;
    width:100%;
}

#categoryPanel{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#222;
    padding:20px;
    border-radius:12px;
    display:none;
    flex-direction:column;
    gap:12px;
    width:90%;
    max-width:420px;
    max-height:80vh;
    overflow:auto;
    z-index:999;
    box-shadow:0 0 40px #000;
}

#categoryPanel button{
    width:100%;
    padding:12px;
    background:#ff7a00;
    border:none;
    border-radius:8px;
    color:white;
    cursor:pointer;
    font-size:15px;
    transition:.2s;
}

#categoryPanel button:hover{
    background:#ffa94d;
    transform:scale(1.03);
}

</style>
</head>
<body>

<!-- PAINEL DE CATEGORIAS -->
<div id="categoryPanel">

    <h2 id="panelTitle">Selecione uma categoria</h2>

   <div id="categoryView">
    <div id="categoryList"></div>

    <button onclick="closeCategories()" style="margin-top:10px;">❌ Fechar</button>
</div>

    <div id="musicView" style="display:none;">
        <div id="musicList"></div>

        <div style="display:flex; gap:10px; margin-top:10px;">
            <button onclick="backToCategories()">⬅ Voltar</button>
            <button onclick="closeCategories()">❌ Fechar</button>
        </div>
    </div>

</div>

<!-- BARRA SUPERIOR -->
<div class="bar top-bar">
    <img src="logo/logo.png" class="logo">
    <img id="loginBtn" src="icon/login.png" class="logo" style="cursor:pointer;">
</div>

<!-- CENTRO -->
<div class="center">
    <h1>Rádio Online</h1>
    <p>Pinheirinho Celulares</p>
</div>

<!-- BARRA INFERIOR -->
<div class="bar bottom-bar">

    <div class="controls">
        <img id="playBtn" src="icon/play.png" onclick="togglePlay()">
        <img id="prevBtn" src="icon/back_musica.png" onclick="prevMusic()" style="display:none;">
        <img id="nextBtn" src="icon/next_musica.png" onclick="nextMusic()" style="display:none;">
        <img id="muteBtn" src="icon/volume_mute.png" onclick="muteMusic()">
        <img src="icon/volume_menos.png" onclick="volumeDown()">
        <img src="icon/volume_mais.png" onclick="volumeUp()">
        <img id="catBtn" src="icon/categoria.png" onclick="changeCategory()" style="display:none;">
    </div>

<div class="track-bar dual-bars">

    <!-- BARRA DA MÚSICA -->
    <div class="bar-block">
        <div class="track-info">
            <span id="trackName">Nenhuma música tocando</span>
            <span id="trackTime">00:00 / 00:00</span>
        </div>
        <div class="progress-container">
            <div class="progress"></div>
            <div class="dot"></div>
        </div>
    </div>

    <!-- BARRA DA CATEGORIA -->
    <div class="bar-block">
        <div class="track-info">
            <span>Categoria: <b id="catName">Eletrônica</b></span>
            <span id="categoryTimeText">00:00 / 60:00</span>
        </div>
        <div class="progress-container">
            <div class="cat-progress"></div>
            <div class="cat-dot"></div>
        </div>
    </div>

</div>

<!-- LOGIN -->
<div id="loginBox">
    <input id="user" placeholder="Login">
    <input id="pass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
</div>

<audio id="player"></audio>

<script>
/* ================= VARIÁVEIS ================= */
let trackTimer = null;
let categoryTimer = null;
let categoryTotalSeconds = 3600; // 60 min padrão
let categoryElapsed = 0;
let userType = "padrao";
let musicCounter = 0;
let currentCategory = "eletronica";
let currentIndex = 0;
let isPlayingPromo = false;
let hasStarted = false;

const loginBtn = document.getElementById("loginBtn");
const catBtn = document.getElementById("catBtn");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const loginBox = document.getElementById("loginBox");
const user = document.getElementById("user");
const pass = document.getElementById("pass");
const player = document.getElementById("player");
const trackName = document.getElementById("trackName");
const catName = document.getElementById("catName");
const categoryPanel = document.getElementById("categoryPanel");
const panelTitle = document.getElementById("panelTitle");
const categoryView = document.getElementById("categoryView");
const musicView = document.getElementById("musicView");
const categoryListDiv = document.getElementById("categoryList");
const musicListDiv = document.getElementById("musicList");

/* ================= MÚSICAS ================= */
const musicas = {
    eletronica: [
        "Amine_Edge_DANCE_Lost.mp3","Artemas_I_like_the_way_you_kiss_me.mp3",
        "Azari_III_Hungry_for_the_power.mp3","Calvin_Harris_Sam_Smith_Promises.mp3",
        "Calvin_Harris_Thinking_About_You_ft_Ayah_Marar.mp3","Duke_Dumont_Ocean_Drive.mp3",
        "Ed_Sheeran_Bad_Habits.mp3","Empire_of_the_Sun_We_Are_The_People.mp3",
        "Gorgon_City_Imagination_ft_Katy_Menditta.mp3","I_Follow_Rivers_Lykke_Li.mp3",
        "James_Hype_7_Seconds_ft_Shamira_Battles.mp3","James_Hype_Drums_feat_Kim_Petra.mp3",
        "James_Hype_Drums_ft_Kim_Petras.mp3","James_Hype_Miggy_Dela_Rosa_Ferrari.mp3",
        "Kendrick_Lamar_SZA_All_The_Stars.mp3","Maverick_Sabre_Slow_Down_Ft_Jorja_Smith_Vintage_Culture.mp3",
        "MEDUZA_Becky_Hill_Goodboys_Lose_Control.mp3","MEDUZA_Tell_It_To_My_Heart_ft_Hozier.mp3",
        "Mr_Probz_Waves.mp3","Purple_Disco_Machine_Kungs_Substitution_ft_Julian_Perretta.mp3",
        "Sam_Smith_Unholy_ft_Kim_Petras.mp3","Tame_Impala_The_Less_I_Know_The_Better.mp3",
        "The_Black_Eyed_Peas_Meet_Me_Halfway.mp3","Tiesto_The_Business.mp3",
        "Zerb_The_Chainsmokers_Addicted_ft_Ink.mp3"
    ],
    pop: [],
    sertanejo: ["Simone_Mendes_Saudade_Proibida.mp3"],
    anos_80: [],
    anos_2000: [],
    divulgacao: ["promo1.mp3","promo2.mp3"]
};

/* ================= LOGIN ================= */
loginBtn.onclick = function(){
    if(userType === "padrao") loginBox.style.display = "flex";
    else logout();
}

function login(){
    if(user.value === "admin" && pass.value === "1234"){
        userType = "admin";
        loginBtn.src = "icon/sair.png";
        catBtn.style.display = "block";
        prevBtn.style.display = "block";
        nextBtn.style.display = "block";
        loginBox.style.display = "none";
    }
}

function logout(){
    userType = "padrao";
    loginBtn.src = "icon/login.png";
    catBtn.style.display = "none";
    prevBtn.style.display = "none";
    nextBtn.style.display = "none";
}

/* ================= PLAYER ================= */
function togglePlay(){
    if(!hasStarted){
        playNext();
        hasStarted = true;
        return;
    }
    if(player.paused){
        player.play();
        playBtn.src = "icon/pausa.png";
    }else{
        player.pause();
        playBtn.src = "icon/play.png";
    }
}

/* ================= LÓGICA DE RÁDIO ================= */
function playNext(){
    if(isPlayingPromo){
        isPlayingPromo = false;
    }else{
        musicCounter++;
    }

    if(musicCounter >= 5){
        playPromo();
        musicCounter = 0;
        return;
    }

    let list = musicas[currentCategory];
    if(list.length === 0) return;

    currentIndex++;
    if(currentIndex >= list.length) currentIndex = 0;

    playMusic(currentCategory, list[currentIndex]);
}

function playPrev(){
    let list = musicas[currentCategory];
    if(list.length === 0) return;

    currentIndex--;
    if(currentIndex < 0) currentIndex = list.length - 1;

    playMusic(currentCategory, list[currentIndex]);
}

function playPromo(){
    isPlayingPromo = true;
    const list = musicas.divulgacao;
    const promo = list[Math.floor(Math.random() * list.length)];
    playMusic("divulgacao", promo);
}

/* ================= PLAY ================= */
function playMusic(cat, song){
    clearInterval(trackTimer);

    player.src = `musicas/${cat}/${song}`;
    player.load();
    player.play();

    trackName.innerText = song.replaceAll("_"," ");
    playBtn.src = "icon/pausa.png";

    player.onloadedmetadata = () => {
        updateTrackTime();
        startTrackTimer();
    };
}

/* ================= BOTÕES ================= */
function nextMusic(){ playNext(); }
function prevMusic(){ playPrev(); }

player.onended = () => {
    playNext();
};

/* ================= CATEGORIA MANUAL ================= */
function selectMusic(cat, music){
    currentCategory = cat;
    currentIndex = musicas[cat].indexOf(music);
    musicCounter = 0;
    isPlayingPromo = false;
    playMusic(cat, music);
    catName.innerText = cat.replace("_"," ").toUpperCase();
    closeCategories();
}

/* ================= MENU DE CATEGORIAS ================= */

let selectedCategory = "";

function changeCategory(){
    if(userType !== "admin") return;
    categoryPanel.style.display = "flex";
    showCategories();
}

function closeCategories(){
    categoryPanel.style.display = "none";
}

function showCategories(){
    panelTitle.innerText = "Selecione uma categoria";
    categoryView.style.display = "block";
    musicView.style.display = "none";

    categoryListDiv.innerHTML = "";

    for(let cat in musicas){
        if(cat === "divulgacao") continue;

        const btn = document.createElement("button");
        btn.innerText = cat.replace("_"," ").toUpperCase();
        btn.onclick = () => openCategory(cat);
        categoryListDiv.appendChild(btn);
    }
}

function openCategory(cat){
    selectedCategory = cat;
    panelTitle.innerText = "Iniciar " + cat.replace("_"," ").toUpperCase();

    categoryView.style.display = "none";
    musicView.style.display = "block";

    musicListDiv.innerHTML = "";

    const startBtn = document.createElement("button");
    startBtn.innerText = "▶ Iniciar " + cat.replace("_"," ").toUpperCase() + " (Aleatório)";
    startBtn.onclick = () => startCategoryRandom(cat);
    musicListDiv.appendChild(startBtn);

    const info = document.createElement("div");
    info.style.fontSize = "13px";
    info.style.opacity = "0.7";
    info.style.textAlign = "center";
    info.style.marginTop = "10px";
    info.innerText = "As músicas tocarão em ordem aleatória.";
    musicListDiv.appendChild(info);
}

function backToCategories(){
    showCategories();
}

function startCategoryRandom(cat){
    currentCategory = cat;
    currentIndex = Math.floor(Math.random() * musicas[cat].length);
    musicCounter = 0;
    isPlayingPromo = false;

    playMusic(cat, musicas[cat][currentIndex]);
    catName.innerText = cat.replace("_"," ").toUpperCase();
    closeCategories();
}

function startTrackTimer(){
    trackTimer = setInterval(()=>{
        updateTrackTime();
        updateCategoryTime();
    },500);
}

function updateTrackTime(){
    if(!player.duration) return;

    const cur = Math.floor(player.currentTime);
    const dur = Math.floor(player.duration);

    document.getElementById("trackTime").innerText =
        formatTime(cur) + " / " + formatTime(dur);

    const percent = (cur / dur) * 100;
    document.querySelector(".progress").style.width = percent + "%";
    document.querySelector(".dot").style.left = percent + "%";
}

</script>
</body>
</html>
